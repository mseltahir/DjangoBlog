{% extends "home/base.html" %}
{% load crispy_forms_tags %}
{% block nav %}
<div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav">
        <li class="nav-item">
            <a class="nav-link" href="{% url 'home:home_page' %}">Home</a>
        </li>
        <li class="nav-item active">
            <a class="nav-link" href="{% url 'blog:blog_page' %}">Blog <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#">Contact me</a>
        </li>
    </ul>
</div>
{% endblock %}
{% block content %}
<div class="col-md-8 offset-md-2">
    <h1>{{ post.title }}</h1>
    <small>
        {{ post.created_on.date }} |&nbsp;
        {% if post.categories.all %}
        Categories:&nbsp;
        {% for category in post.categories.all %}
        <a href="{% url 'blog:blog_category' category.name %}">
            {{ category.name }}
        </a>&nbsp;
        {% endfor %}
        {% endif %}
    </small>
    <p class="container">{{ post.content |linebreaks }}</p>
    <a href="{% url 'blog:delete_post' post.pk %}">
        <button class="btn btn-danger">
            Delete
        </button>
    </a>
    <hr>
    <h4>Comments</h4>
    {% for comment in post.comments.all %}
    <div class="card" style="width: 36rem;">
        <div class="card-body">
            <h5 class="card-title">by <b>{{ comment.author }} </b>
                <span class="card-title mb-2 text-muted" style="font-size: 70%"><i>on
                        {{comment.created_on.date }}&nbsp;</i> </span></h5>
            <p class="card-text">{{comment.comment}}</p>
        </div>
    </div>
    {% empty %}
    <p style="font-size: 100%">(No comments yet)</p>
    {% endfor %}
    <hr>
    <h5>Leave a comment:</h5>
    <form action="/blog/{{ post.pk }}" method="post" class="container col-md-5 offset-md-0 px-0 mb-5">
        {% csrf_token %}
        <div class="form-group">
            {{ form.author|as_crispy_field }}
        </div>
        <div class="form-group">
            {{ form.comment|as_crispy_field }}
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
</div>
{% endblock %}